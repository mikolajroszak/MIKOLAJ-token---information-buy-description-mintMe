(window["wpJsonpOkeReviews"]=window["wpJsonpOkeReviews"]||[]).push([["modules/okendo-widget"],{2877:function(e,t,i){"use strict";function s(e,t,i,s,r,o,d,a){var n,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=i,u._compiled=!0),s&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),d?(n=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(d)},u._ssrRegister=n):r&&(n=a?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),n)if(u.functional){u._injectStyles=n;var l=u.render;u.render=function(e,t){return n.call(t),l(e,t)}}else{var g=u.beforeCreate;u.beforeCreate=g?[].concat(g,n):[n]}return{exports:e,options:u}}i.d(t,"a",(function(){return s}))},"5a8d":function(e,t,i){"use strict";var s=i("7c19"),r=i("88c3"),o=i("9de8"),d=i("e39c"),a=i("522e"),n=i("0625");const u=n["a"].apiBaseUrl,l=n["a"].dynamicTranscodedMediaBaseUrl,g=n["a"].appBaseUrl,c=n["a"].recorderPlusBaseUrl,v=n["a"].foursixtyBaseUrl,w={ratingAndReviewCount:0,ratingAndReviewCountByLevel:{},ratingAndReviewValuesTotal:0},h=()=>r["a"].locale?"&locale="+r["a"].locale:"",p=(e,t)=>"undefined"===typeof e||404===e?Promise.resolve(t):Promise.reject(e),b=async(e,t,i)=>{const s=o["a"].getWidgetRenderMode();if("empty"===s)return Promise.resolve(t);{const o="sample-data"===s?{headers:{"x-okendo-force-sample-data":"true"}}:void 0;try{return a["a"].get(e,o)}catch(r){if(i)return i(r,t);throw r}}};t["a"]={get subscriberId(){return s["default"].subscriberId},get storeBaseUrl(){if(this.subscriberId)return`${u}/stores/${this.subscriberId}`;console.warn("No subscriber Id set")},filtersToQueryString(e){if(!(null===e||void 0===e?void 0:e.length))return"";const t=null===e||void 0===e?void 0:e.map(e=>{const t="shopper"===e.target?"shopperAttributes":"generalAttributes",i=d["a"].toComaEscapedEncodedString(e.title),s=e.options.map(e=>d["a"].toComaEscapedEncodedString(e)).join(",");return`${t}=${i},${s}`}).join("&");return"&"+t},parseFoursixtyParams(e){return Object.keys(e).filter(t=>"activePageId"!==t&&e[t]).map(t=>`${d["a"].snakeCase(t)}=${e[t]}`).join("&")},ratingFiltersToQueryString(e){return(null===e||void 0===e?void 0:e.length)?"&"+e.map(e=>"ratings="+e).join("&"):""},apiBaseUrl(){return u},dynamicTranscodedMediaBaseUrl(){return l},writeReviewUrl(e){var t;return(null===(t=s["default"].features)||void 0===t?void 0:t.recorderPlusEnabled)?`${c}/?subscriberId=${this.subscriberId}&productId=${e}${h()}`:`${g}/stores/${this.subscriberId}/review?productId=${e}${h()}`},askQuestionUrl(e){return`${g}/stores/${this.subscriberId}/question?productId=${e}`},poweredByUrl(){return`https://okendo.io?utm_source=${this.subscriberId}&utm_medium=widget&utm_campaign=poweredby`},getMore(e,t){const i=t?e.replace(/limit=[0-9]*/i,"limit="+t):e;return a["a"].get(`${u}${i}`)},postHelpfulVoteReview(e,t){return a["a"].post(`${this.storeBaseUrl}/reviews/${e}/vote`,{voteType:t})},getReview(e){return b(`${this.storeBaseUrl}/reviews/${e}`,void 0)},getReviewsProduct(e,t=5,i="date desc",s,r){return b(`${this.storeBaseUrl}/products/${e}/reviews?limit=${t}&orderBy=${i}${this.filtersToQueryString(s)}${this.ratingFiltersToQueryString(r)}`,{reviews:[],areReviewsGrouped:!1})},getReviewsAll(e=5,t="date desc"){return b(`${this.storeBaseUrl}/reviews?limit=${e}&orderBy=${t}`,{reviews:[]})},getReviewsGroup(e,t=5,i="date desc"){return b(`${this.storeBaseUrl}/collections/${e}/reviews?limit=${t}&orderBy=${i}`,{reviews:[]})},getReviews(e,t,i=5,s="date desc",r,d){const a=o["a"].getWidgetMode(e,t);switch(a){case"product":return this.getReviewsProduct(e,i,s,r,d);case"group":return this.getReviewsGroup(t,i,s);default:return this.getReviewsAll(i,s)}},async getReviewAggregateProduct(e){const t=await b(`${this.storeBaseUrl}/products/${e}/review_aggregate`,void 0,p);return null!==t&&void 0!==t?t:{reviewAggregate:w}},async getReviewAggregateAll(){const e=await b(this.storeBaseUrl+"/review_aggregate",void 0,p);return null!==e&&void 0!==e?e:{reviewAggregate:w}},async getReviewAggregateGroup(e){const t=await b(`${this.storeBaseUrl}/collections/${e}/review_aggregate`,void 0,p);return null!==t&&void 0!==t?t:{reviewAggregate:w}},getMediaProduct(e,t=6,i="date desc"){return b(`${this.storeBaseUrl}/products/${e}/review_media?limit=${t}&orderBy=${i}`,{media:[]})},getMediaAll(e=6,t="date desc"){return b(`${this.storeBaseUrl}/review_media?limit=${e}&orderBy=${t}`,{media:[]})},getMediaGroup(e,t=6,i="date desc"){return b(`${this.storeBaseUrl}/collections/${e}/review_media?limit=${t}&orderBy=${i}`,{media:[]})},getQuestionsProduct(e,t=5,i="date desc"){return b(`${this.storeBaseUrl}/products/${e}/questions?limit=${t}&orderBy=${i}`,{questions:[]})},getQuestionAggregateProduct(e){return b(`${this.storeBaseUrl}/products/${e}/question_aggregate`,void 0)},getQuestionsAggregateCollection(e){return b(`${this.storeBaseUrl}/collections/${e}/question_aggregate`,void 0)},getQuestionsCollection(e,t=5,i="date desc"){return b(`${this.storeBaseUrl}/collections/${e}/questions?limit=${t}&orderBy=${i}`,{questions:[]})},getFiltersProduct(e){return b(`${this.storeBaseUrl}/products/${e}/attributes`,{productAttributes:[]})},getFoursixtyMedia(e){return a["a"].get(`${v}/${e.activePageId}/timeline/?${this.parseFoursixtyParams(e)}`)},getFoursixty(e){return a["a"].get(e)},postHelpfulVoteQuestion(e,t){return a["a"].post(`${this.storeBaseUrl}/questions/${e}/vote`,{voteType:t})},postHelpfulVoteAnswer(e,t,i){return a["a"].post(`${this.storeBaseUrl}/questions/${e}/answers/${t}/vote`,{voteType:i})}}},"8d0e":function(e,t,i){"use strict";var s=i("9ab4"),r=i("2b0e"),o=i("2fe1"),d=i("60a3"),a=i("9de8");let n=class extends r["a"]{constructor(){super(...arguments),this.version="0.39.0",this.widgetWidth=0,this.widgetSize="small"}mounted(){this.addKeyboardHelper(),this.addResizeListener()}destroyed(){this.removeResizeListener(),this.removeKeyboardHelper()}setWidgetSizes(){const e=this.$el.firstElementChild;e&&this.widgetWidth!==e.clientWidth&&setTimeout(()=>{this.widgetWidth=e.clientWidth,this.widgetSize=a["a"].getWidgetSize(e)},0)}addResizeListener(){this.setWidgetSizes(),this.$nextTick(()=>{this.resizeObserver=new ResizeObserver(a["a"].debounce(this.setWidgetSizes,100)),this.resizeObserver.observe(this.$el)})}removeResizeListener(){this.resizeObserver&&this.resizeObserver.disconnect()}addKeyboardHelper(){const e=t=>{"Tab"===t.key&&(document.body.classList.add("is-oke-keyboardUser"),window.removeEventListener("keydown",e))};window.addEventListener("keydown",e)}removeKeyboardHelper(){window.removeEventListener("keydown",this.addKeyboardHelper)}};Object(s["a"])([Object(d["c"])()],n.prototype,"widgetId",void 0),Object(s["a"])([Object(d["c"])()],n.prototype,"initialData",void 0),n=Object(s["a"])([o["b"]],n),t["a"]=n},"9ab4":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));function s(e,t,i,s){var r,o=arguments.length,d=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(d=(o<3?r(d):o>3?r(t,i,d):r(t,i))||d);return o>3&&d&&Object.defineProperty(t,i,d),d}Object.create;Object.create},c3d8:function(e,t,i){},ea14:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"okeReviews oke-w",attrs:{"data-oke-reviews-version":e.version}},[i("div",{ref:"okendoWidget",staticClass:"js-oke-widgetSize",class:{"oke-is-small":"small"===e.widgetSize,"oke-is-medium":"medium"===e.widgetSize,"oke-is-large":"large"===e.widgetSize}},[e.showOkendoWidget?[e.reviewAggregate&&e.reviewCount&&"empty"!==e.viewState?i("widget-header",{attrs:{reviewAggregate:e.reviewAggregate,media:e.media,mediaNextUrl:e.mediaNextUrl,widgetMode:e.widgetMode}}):e._e(),e.tabs.length>1||e.okendoBrandingEnabled?i("div",{staticClass:"oke-w-controls"},[i("div",{staticClass:"oke-w-controls-nav"},[e.tabs.length>1?i("widget-nav-bar",{attrs:{activeTab:e.activeTab,tabs:e.tabs,reviewCount:e.reviewCount,questionCount:e.questionCount,widgetId:e.widgetId},on:{tabChange:function(t){return e.onTabChange(t)}}}):e._e(),e.okendoBrandingEnabled?i("powered-by"):e._e()],1)]):e._e(),e._l(e.tabs,(function(t){return i("div",{key:t,staticClass:"oke-w-main"},[i("div",{staticClass:"oke-w-panel",attrs:{hidden:e.activeTab!==t,id:t+"-panel-"+e.widgetId,"aria-labelledby":t+"-tab-"+e.widgetId,role:"tabpanel"}},["reviews"===t?i("div",{staticClass:"oke-w-reviewsTab"},[i("reviews",{attrs:{productId:e.productId,groupId:e.groupId,initialReviews:e.reviews,initialNextUrl:e.reviewsNextUrl,initialReviewCount:e.reviewCount,productAttributes:e.productAttributes,widgetSize:e.widgetSize,widgetMode:e.widgetMode}})],1):e._e(),e.questionsEnabled&&"questions"===t&&"unopened"!==e.questionsState?i("div",{staticClass:"oke-w-questionsTab"},[i("questions",{attrs:{hidden:"loading"===e.questionsState,productId:e.productId,groupId:e.groupId,showStateTopBorderOnEmpty:!1},on:{load:function(t){return e.onQuestionsLoaded()}}}),i("div",{staticClass:"oke-w-questions-loading"},["loading"===e.questionsState?i("state",{attrs:{state:"loading",contentType:"questions"}}):e._e()],1)],1):e._e()])])}))]:"empty"!==e.viewState?i("state",{attrs:{state:e.viewState,productId:e.productId,contentType:"reviews"},on:{retry:function(t){return e.loadWidgetData()}}}):e._e()],2),e.metafieldJsonData?i("script",{attrs:{type:"application/json",id:"oke-metafield-data"}},[e._v(" "+e._s(e.metafieldJsonData)+" ")]):e._e()])},r=[],o=i("9ab4"),d=i("60a3"),a=i("5a8d"),n=i("7c19"),u=i("8d0e"),l=i("9de8");let g=class extends(Object(d["b"])(u["a"])){constructor(){super(...arguments),this.reviews=[],this.media=[],this.reviewCount=0,this.questionCount=0,this.productAttributes=[],this.activeTab="reviews",this.tabs=["reviews"],this.questionsState="unopened",this.viewState="loading"}created(){if(this.widgetMode=l["a"].getWidgetMode(this.productId,this.groupId),this.reviewsWidgetSettings.tabs.questions&&"all"!==this.widgetMode&&this.tabs.push("questions"),this.initialData){const{reviews:e,reviewsNextUrl:t,reviewAggregate:i,media:s,mediaNextUrl:r,questionCount:o,productAttributes:d,areReviewsGrouped:a}=this.initialData;this.reviews=e||[],this.reviewsNextUrl=t,this.reviewAggregate=i,this.media=s,this.mediaNextUrl=r,this.reviewCount=(null===i||void 0===i?void 0:i.ratingAndReviewCount)||0,this.questionCount=o||0,this.productAttributes=d||[],this.widgetMode=a?"group":this.widgetMode,this.setSharedProductName(),this.viewState=this.reviewCount||this.questionCount?"content":"empty"}else this.loadWidgetData()}mounted(){this.initialData&&this.sendWidgetRenderedEvent()}sendWidgetRenderedEvent(){this.$nextTick(()=>{l["a"].sendWidgetRenderedEvent("reviews-widget",this.widgetId)})}get showOkendoWidget(){return"content"===this.viewState||"empty"===this.viewState&&this.showWhenEmpty}get okendoBrandingEnabled(){return!n["default"].widgetSettings.global.hideOkendoBranding}get reviewsWidgetSettings(){return n["default"].widgetSettings.reviewsWidget}get showWhenEmpty(){return this.reviewsWidgetSettings.showWhenEmpty}get questionsEnabled(){return this.reviewsWidgetSettings.tabs.questions}get metafieldJsonData(){if("all"!==this.widgetMode){const e={reviews:this.reviews,reviewsNextUrl:this.reviewsNextUrl,areReviewsGrouped:"group"===this.widgetMode,media:this.media,mediaNextUrl:this.mediaNextUrl,reviewAggregate:this.reviewAggregate,questionCount:this.questionCount,productAttributes:this.productAttributes};return JSON.stringify(e)}}onTabChange(e){"questions"===e&&"unopened"===this.questionsState&&(this.questionsState=this.questionCount?"loading":"loaded"),this.activeTab=e}onQuestionsLoaded(){this.questionsState="loaded"}async loadWidgetData(){var e,t,i;this.viewState="loading";const s=this.headerImagesToLoad(),r=this.loadReviewAggregate(),o=s?this.loadMediaAggregate(s):Promise.resolve(void 0),d=this.loadReviews(this.reviewsWidgetSettings.reviews.list.initialPageSize||5,this.reviewsWidgetSettings.reviews.controls.defaultSort),n=this.questionsEnabled?this.loadQuestionAggregate():Promise.resolve(void 0),u=this.reviewsWidgetSettings.reviews.controls.filterMode,l="product"!==this.widgetMode||"open"!==u&&"open-always"!==u?Promise.resolve(void 0):a["a"].getFiltersProduct(this.productId);try{const[s,a,u,g,c]=await Promise.all([d,r,o,n,l]);this.reviews=s.reviews,this.reviewsNextUrl=null===s||void 0===s?void 0:s.nextUrl,this.media=null!==(e=null===u||void 0===u?void 0:u.media)&&void 0!==e?e:[],this.mediaNextUrl=null===u||void 0===u?void 0:u.nextUrl,this.reviewAggregate=a.reviewAggregate,this.reviewCount=this.reviewAggregate.ratingAndReviewCount,this.questionCount=null!==(t=null===g||void 0===g?void 0:g.questionAggregate.approvedQuestionCount)&&void 0!==t?t:0,this.productAttributes=null!==(i=null===c||void 0===c?void 0:c.productAttributes)&&void 0!==i?i:[],this.widgetMode="areReviewsGrouped"in s&&s.areReviewsGrouped?"group":this.widgetMode,this.viewState=this.reviewCount||this.questionCount?"content":"empty",this.setSharedProductName()}catch(g){this.viewState="error"}finally{this.sendWidgetRenderedEvent()}}loadQuestionAggregate(){switch(this.widgetMode){case"product":return a["a"].getQuestionAggregateProduct(this.productId);case"group":return a["a"].getQuestionsAggregateCollection(this.groupId);default:return Promise.resolve(void 0)}}async loadReviewAggregate(){switch(this.widgetMode){case"product":return await a["a"].getReviewAggregateProduct(this.productId);case"group":return await a["a"].getReviewAggregateGroup(this.groupId);default:return await a["a"].getReviewAggregateAll()}}loadReviews(e,t){return a["a"].getReviews(this.productId,this.groupId,e,t)}loadMediaAggregate(e){switch(this.widgetMode){case"product":return a["a"].getMediaProduct(this.productId,e);case"group":return a["a"].getMediaGroup(this.groupId,e);default:return a["a"].getMediaAll(e)}}setSharedProductName(){var e;n["default"].productLabel="all"===this.widgetMode?this.$tc("All Products"):null===(e=this.reviewAggregate)||void 0===e?void 0:e.productName}headerImagesToLoad(){return l["a"].getHeaderImagesCountToLoad(this.reviewsWidgetSettings.header.blocks)}};Object(o["a"])([Object(d["c"])()],g.prototype,"groupId",void 0),Object(o["a"])([Object(d["c"])()],g.prototype,"productId",void 0),Object(o["a"])([Object(d["c"])()],g.prototype,"locale",void 0),Object(o["a"])([Object(d["c"])()],g.prototype,"initialData",void 0),g=Object(o["a"])([Object(d["a"])({components:{Reviews:()=>Promise.all([i.e("okendo-reviews-lib"),i.e("modules/widget")]).then(i.bind(null,"4ff5")),WidgetNavBar:()=>Promise.all([i.e("okendo-reviews-lib"),i.e("modules/widget")]).then(i.bind(null,"5476")),WidgetHeader:()=>Promise.all([i.e("okendo-reviews-lib"),i.e("modules/widget")]).then(i.bind(null,"f282")),PoweredBy:()=>i.e("modules/shared-components").then(i.bind(null,"fcf3")),State:()=>i.e("modules/shared-components").then(i.bind(null,"6d6f")),Questions:()=>Promise.all([i.e("okendo-reviews-lib"),i.e("modules/questions")]).then(i.bind(null,"1d2d"))}})],g);var c=g,v=c,w=(i("f778"),i("2877")),h=Object(w["a"])(v,s,r,!1,null,null,null);t["default"]=h.exports},f778:function(e,t,i){"use strict";i("c3d8")}}]);