(async()=>{const t="rcsms-cart-widget",n="none",e="flex",r="div",a="application/json";let s=document.currentScript.src.indexOf("app.electricsms.com")>-1?"https://app.electricsms.com":"https://sms.stage.rechargeapps.com";const c="ngrok.io";document.currentScript.src.indexOf(c)>-1&&(s=document.currentScript.src.split(c)[0]+c);const o=`${s}/cart-widget/assets`,i="accepted",d="declined";let l=!1,m=null;try{m=await p(`${s}/sms/api/cart_widget_configs?shopify_domain=${window.Shopify.shop}`,"GET")}catch(t){console.log(t)}if(m&&!m.enabled)return;function p(t,n,e){return new Promise(((r,s)=>{const c=new XMLHttpRequest;c.open(n,t,!0),c.setRequestHeader("Accept",a),c.setRequestHeader("Content-Type",a),c.onload=()=>{200===c.status?r(JSON.parse(c.responseText)):s(c.status)},c.send(JSON.stringify(e))}))}const g=t=>p("/cart/update.json","POST",t),u=()=>p("/cart.js","GET"),h=window.Shopify.designMode;console.info("rcSMS Subscription Cart Widget Loaded");const _=`\n    :root {\n      --rcsms-color-dark: #121533;\n      --rcsms-color-light: #f5f5f5;\n      --rcsms-color-cobalt: #3901F1;\n    }\n\n    #rcsms-cart-widget {\n      overflow: auto;\n    }\n\n    #rcsms-cart-widget:not([data-responsive="true"]) {\n      display: flex;\n      justify-content: flex-end;\n    }\n\n    .rcsms-cart-widget__wrapper {\n      align-items: center;\n      display: flex !important;\n      justify-content: space-between;\n      width: 360px;\n      max-width: 100%;\n      position: relative;\n      margin: ${m?m.y_margin||0:12}px ${m&&m.x_margin?m.x_margin:0}px;\n      opacity: 0;\n      transform: translateY(-48px);\n      transition: transform 400ms ease-in-out, opacity 400ms ease-in-out 100ms;\n    }\n\n    #rcsms-cart-widget[data-disable-branding="true"] .rcsms-cart-widget__wrapper {\n      flex-direction: row-reverse;\n    }\n\n    #rcsms-cart-widget[data-responsive="true"] .rcsms-cart-widget__wrapper {\n      width: 100%;\n    }\n\n    .rcsms-cart-widget__label {\n      -moz-user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n      align-items: center;\n      color: var(--rcsms-color-dark);\n      cursor: pointer;\n      display: flex;\n      font-size: 12px;\n      margin-bottom: 0;\n      position: relative;\n      user-select: none;\n      font-weight: 400;\n      letter-spacing: normal;\n      text-transform: none;\n    }\n\n    .rcsms-cart-widget__checkbox {\n      cursor: pointer;\n      height: 0;\n      opacity: 0;\n      position: absolute;\n      width: 0;\n    }\n\n    .rcsms-cart-widget__checkmark {\n      border: 1px solid var(--rcsms-color-dark);\n      border-radius: 2px;\n      height: 20px;\n      margin-right: 8px;\n      width: 20px;\n    }\n\n    .rcsms-cart-widget__checkbox:checked ~ .rcsms-cart-widget__checkmark {\n      background-color: var(--rcsms-color-dark);\n      background-image: url(${o}/check.svg);\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: 60%;\n    }\n\n    #rcsms-cart-widget[data-variant="midnight"] .rcsms-cart-widget__label {\n      color: #ffffff;\n    }\n\n    #rcsms-cart-widget[data-variant="midnight"] .rcsms-cart-widget__checkmark {\n      background-color: #ffffff;\n    }\n\n    #rcsms-cart-widget[data-variant="midnight"] .rcsms-cart-widget__checkbox:checked ~ .rcsms-cart-widget__checkmark {\n      baccground-color: #ffffff;\n      background-image: url(${o}/check-dark.svg);\n    }\n\n    #rcsms-cart-widget[data-disable-branding="true"] .rcsms-cart-widget__logo {\n      display: none !important;\n    }\n\n    .rcsms-cart-widget__logo {\n      background-color: #000;\n      background-image: url(${o}/logo-white.svg);\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: 75px;\n      border-radius: 16px;\n      cursor: pointer;\n      display: block !important;\n      height: 24px;\n      padding: 2px 2px;\n      width: 100px;\n      min-width: 100px;\n    }\n\n    #rcsms-cart-widget[data-variant="cobalt"] .rcsms-cart-widget__logo {\n      background-color: var(--rcsms-color-dark);\n      background-image: url(${o}/logo-white.svg);\n    }\n\n    #rcsms-cart-widget[data-variant="midnight"] .rcsms-cart-widget__logo {\n      background-color: #FEFBF6;\n      background-image: url(${o}/logo.svg);\n    }\n\n    .rcsms-cart-widget__modal {\n      background-color: var(--rcsms-color-light);\n      border-radius: 8px;\n      top: 0;\n      opacity: 0;\n      padding: 10px 12px;\n      position: absolute;\n      right: 0;\n      transform: translateY(calc(-100% - 10px));\n      transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;\n      visibility: hidden;\n      width: 80%;\n      z-index: 1;\n    }\n\n    .rcsms-cart-widget__modal:after {\n      border-top: 6px solid var(--rcsms-color-light);\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      content: '';\n      display: block;\n      position: absolute;\n      right: 5%;\n      bottom: -5px;\n    }\n\n    .rcsms-cart-widget__modal p {\n      color: var(--rcsms-color-dark);\n      font-size: 13px;\n      line-height: 1.3;\n      margin-bottom: 4px;\n      text-align: left;\n    }\n\n    .rcsms-cart-widget__modal p:last-child {\n      margin-bottom: 0;\n    } \n\n    .rcsms-cart-widget__modal a {\n      color: #3901F1;\n    }\n\n    .rcsms-cart-widget__logo:hover ~ .rcsms-cart-widget__modal {\n      opacity: 1;\n      visibility: visible;\n    }\n  `;function w(){const e=function(){const n=document.getElementById(t);if(n)return n;const e="(//*[not(self::script)][text()[contains(translate(., 'SUBTOAL', 'subtoal'),'subtotal')]])[last()]",a=document.evaluate(e,document,null,XPathResult.ANY_TYPE,null).iterateNext();if(!a)return!1;const s=x(a),c=document.createElement(r);return c.height=0,c.id=t,s.parentNode.insertBefore(c,s.nextSibling),document.getElementById(t)}();if(!e||""!==e.innerHTML)return{};"cart"!==document.URL.split("/").reverse()[0]&&(e.dataset.responsive=!0);const a=document.createElement(r);a.className="rcsms-cart-widget__wrapper",a.style.display=n;const s=document.createElement("label");s.className="rcsms-cart-widget__label";const c=document.createTextNode("Manage your orders via SMS"),o=document.createElement("input");o.type="checkbox",o.className="rcsms-cart-widget__checkbox";const i=document.createElement("span");i.className="rcsms-cart-widget__checkmark";const d=document.createElement(r);d.className="rcsms-cart-widget__logo";const l=document.createElement(r);return l.className="rcsms-cart-widget__modal",l.innerHTML="\n      <p><strong>How subscriptions work</strong></p>\n      <p>Products are automatically delivered on your schedule. No obligation, modify or cancel your subscription anytime.</p>\n    ",s.appendChild(o),s.appendChild(i),s.appendChild(c),a.appendChild(s),a.appendChild(d),a.appendChild(l),e.appendChild(a),{widget:e,checkbox:o}}function f(t){if(h)return;const n="sci_cart",e=t===i?{last_opt_in_source:n}:{last_opt_out_source:n};return g({attributes:{notification_preferences:JSON.stringify({sms:{transactional:{status:t,...e}}})}})}let b=null;async function k(r){const a=r,s=await u(),c=s.item_count>0&&s.items.some((t=>t.properties&&!!t.properties.shipping_interval_frequency||!!t.selling_plan_allocation));c&&!l&&(document.querySelector(".rcsms-cart-widget__checkbox").checked=!0,f(i),l=!0),a.style.display=c?e:n;const o=document.querySelector(".rcsms-cart-widget__wrapper");o&&o.offsetWidth<360&&(document.getElementById(t).dataset.responsive=!0),h&&(a.style.display=e),o.style.transform="translateY(0)",o.style.opacity=1}function x(t){const n=t.parentNode;if(n)return"DIV"===n.nodeName?n.classList.contains("col")?x(n):n:x(n);throw Error("could not find parent div")}function y(t,n){const e=t.parentNode;if(!e)throw Error("could not find parent with bg color");const r=window.getComputedStyle(e,null).getPropertyValue("background-color");"rgba(0, 0, 0, 0)"===r?y(e,n):n(r)}!async function t(){const{widget:n,checkbox:e}=w();setTimeout(t.bind(null),2e3),n&&(m&&("auto"===m.variant&&y(n,(t=>{"dark"===function(t){let n,e,r;if(t.match(/^rgb/)){const a=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);[,n,e,r]=a}else{let a=t;a=+`0x${t.slice(1).replace(t.length<5&&/./g,"$&$&")}`,n=a>>16,e=a>>8&255,r=255&a}return Math.sqrt(n*n*.299+e*e*.587+r*r*.114)>127.5?"light":"dark"}(t)&&(n.dataset.variant="midnight"),n.dataset.variant="paper"})),n.dataset.disableBranding=!!m.branding_disabled,n.dataset.variant||(n.dataset.variant=m.variant)),await k(n),clearInterval(b),b=setInterval(k.bind(null,n),2e3),e.addEventListener("click",(t=>{f(t.target.checked?i:d)})))}(),function(t){const n=document.getElementsByTagName("head").item(0),e=document.createElement("style");e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),n.appendChild(e)}(_)})();